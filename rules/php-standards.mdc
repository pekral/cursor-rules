---
description: Project-wide PHP conventions and best practices enforced across all application source files.
globs:
alwaysApply: true
---

## Whitespace
- Add blank lines between statements for readability
- Exception: sequences of equivalent single-line operations
- No extra empty lines between `{}` brackets
- Let code "breathe" - avoid cramped formatting

## Fluent & High-Quality SDK API

Prefer fluent, natural-language readable APIs over ad-hoc helpers.

Core logic should be:
- clean core
- reusable SDK
- high-quality API
- framework-agnostic (no framework glue)
- no helper chaos

Use fluent value-object wrappers for domain primitives,
so method names read like English sentences.

Good example:
    Iterable::of($value)->isEmpty()
    Url::of($uri)->isSecure()
    StringValue::of($text)->isBlank()

Bad example:
    Helper::checkEmpty($data)
    Utils::validateIterable($x)
    SomeClass::empty()

Naming guidelines:
- Factory methods: of(), from()
- Boolean queries: isEmpty(), isNotEmpty(), isValid(), hasItems()
- Use english phrases that read naturally

Avoid:
- vague verbs
- mixed helpers without context
- god utils with many static methods

## No Inventions
- Don't invent changes other than what's explicitly requested.

## No Implementation Checks
- Don't ask the user to verify implementations that are visible in the provided context.

## No Unnecessary Updates
- Don't suggest updates or changes to files when there are no actual modifications needed.

## No Apologies
- Never use apologies.

## Preserve Existing Code
- Don't remove unrelated code or functionalities. Pay attention to preserving existing structures.

## PHP Standards
- Never use ?array or nullable iterated typehints
- Use PHP features (php version is defined in composer.json file) when appropriate (e.g., typed properties, match expressions), Generate code for actual php version.
- Use short nullable notation: `?string` not `string|null`.
- Always specify `void` return types when methods return nothing.

## Enums
- All words in enum values should be capitalized.

## Naming
- Variables, functions, and classes should reveal their purpose
- Names should explain why something exists and how it's used

## DRY (Don't Repeat Yourself)
- Extract repeated code into reusable functions
- Share common logic through proper abstraction
- Maintain single sources of truth

## Verify Information
- Always verify information before presenting it. Do not make assumptions or speculate without clear evidence.

## Arrays
- always use DTO`s for typed data exchange (never use `array<mixed>`)
